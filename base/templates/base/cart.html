{% extends 'components/base.html' %} {%block content%}
<!-- Cart Items Display -->
{% comment %} <div class="cart-items">
    <h2>Cart</h2>
    <ul>
        {% for cart_item in cart_items %}
        <li>
            <span>{{ cart_item.meal.name }}</span>
            <span>Quantity: {{ cart_item.quantity }}</span>
            <span>Price: <span>&#8377;</span>{{ cart_item.meal.price }}</span>
        </li>
        {% endfor %}
    </ul>
</div>

<!-- Cart Total -->
<div class="cart-total">
    <h3>Total</h3>
    <p>${{ cart_total }}</p>
</div>

<!-- Checkout Button -->
<div class="checkout">
    <button type="button">Checkout</button>
</div> {% endcomment %}
<style>
    .item-row {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }
    .item-row input {
        width: 40px;
        margin: 0 5px;
    }
    .item-row button {
        margin-right: 5px;
    }
</style>
<h1>Cart</h1>
<form method="POST" action="{% url 'update_cart' %}">
    {% csrf_token %}
    {% for cart_item in cart_items %}
    <div class="item-row">
        <span>{{ cart_item.meal.name }}</span>
        <button type="button" class="decrease-quantity" data-id="{{ cart_item.id }}">-</button>
        <input type="number" name="quantity_{{ cart_item.id }}" value="{{ cart_item.quantity }}" min="1">
        <button type="button" class="increase-quantity" data-id="{{ cart_item.id }}">+</button>
    </div>
    {% endfor %}
    <button type="submit">Update Cart</button>
</form>

<script>
    // JavaScript code to handle button clicks and quantity updates
    document.addEventListener('DOMContentLoaded', function() {
        // Get all the decrease quantity buttons
        var decreaseButtons = document.querySelectorAll('.decrease-quantity');
        
        // Attach click event listeners to each decrease button
        decreaseButtons.forEach(function(button) {
            button.addEventListener('click', function(event) {
                var cartItemId = event.target.getAttribute('data-id');
                var quantityInput = document.querySelector('input[name="quantity_' + cartItemId + '"]');
                var currentQuantity = parseInt(quantityInput.value);
                if (currentQuantity > 1) {
                    quantityInput.value = currentQuantity - 1;
                }
            });
        });

        // Get all the increase quantity buttons
        var increaseButtons = document.querySelectorAll('.increase-quantity');
        
        // Attach click event listeners to each increase button
        increaseButtons.forEach(function(button) {
            button.addEventListener('click', function(event) {
                var cartItemId = event.target.getAttribute('data-id');
                var quantityInput = document.querySelector('input[name="quantity_' + cartItemId + '"]');
                var currentQuantity = parseInt(quantityInput.value);
                quantityInput.value = currentQuantity + 1;
            });
        });
    });
</script>

{%endblock%} 






    